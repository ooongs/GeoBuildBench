[2025-12-10 14:43:32] 배치 8 시작: 700 ~ 800
✓ OpenAI API key found
  Using gpt-4.1 for two-stage processing:
    - Stage 1: Problem validation + text cleaning
    - Stage 2: Object extraction + construction difficulty rating

Input directory: data-5/GeoQA3/json
Total files found: 5007
Output file: ground_truth/dataset_700_800.jsonl

Processing options:
  - Range: 700 to 800 (100 files)
  - Skip ambiguous references (∠1, ∠2, etc.): ✓
  - Clean text (remove '如图所示', questions): ✓
  - Classify problems: ✓
  - Rate difficulty: ✓
  - Resume mode: ✓

============================================================
Two-Stage LLM Processing
  Stage 1: Validate + Clean
  Stage 2: Parse + Rate Difficulty (construction-focused)
============================================================
Processing range: 700 to 800
Files to process: 100
Output file: ground_truth/dataset_700_800.jsonl
Resume mode: True (found 762 already processed)
============================================================

[ 63.0%] ✓ Parsed: 1196 | Circle Properties  | Diff: 3/5
Problem 1197 rejected: ∠D is ambiguous (single-letter angle without context); D's position is only defined as intersection, but ∠D is not a well-defined angle for construction.
[ 64.0%] ⊘ Skipped: 1197
Auto-added missing point: R
[ 65.0%] ✓ Parsed: 1198 | Circle Properties  | Diff: 4/5
Problem 1199 rejected: 点M、N的位置未定义，无法确定其在何处，属于未定义点
[ 66.0%] ⊘ Skipped: 1199
Skipping problem 1200: contains numbered angles (∠1, ∠2)
[ 67.0%] ⊘ Skipped: 1200
[ 68.0%] ✓ Parsed: 1201 | Angle Relationship | Diff: 3/5
Problem 1202 rejected: Points D, E, F are not defined; their positions are unknown, so the figure cannot be constructed.
[ 69.0%] ⊘ Skipped: 1202
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29447, Requested 1786. Please try again in 2.466s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 70.0%] ✓ Parsed: 1206 | Unknown            | Diff: 3/5
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29745, Requested 1792. Please try again in 3.074s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 71.0%] ✓ Parsed: 1210 | Unknown            | Diff: 3/5
Validation failed for 1213: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 30000, Requested 619. Please try again in 1.238s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29449, Requested 1809. Please try again in 2.516s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 72.0%] ✓ Parsed: 1213 | Unknown            | Diff: 3/5
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29483, Requested 1791. Please try again in 2.548s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 73.0%] ✓ Parsed: 1215 | Unknown            | Diff: 3/5
Skipping problem 1216: contains numbered angles (∠1, ∠2)
[ 74.0%] ⊘ Skipped: 1216
Problem 1217 rejected: 点E的位置未定义，无法确定∠ABE和∠ECD的具体位置，E为未定义点。
[ 75.0%] ⊘ Skipped: 1217
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29312, Requested 1790. Please try again in 2.204s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 76.0%] ✓ Parsed: 1218 | Unknown            | Diff: 3/5
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29003, Requested 1793. Please try again in 1.592s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 77.0%] ✓ Parsed: 1219 | Unknown            | Diff: 3/5
Problem 1220 rejected: 点M的位置未定义，无法确定其在图中的具体位置，导致无法进行几何作图
[ 78.0%] ⊘ Skipped: 1220
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29018, Requested 1792. Please try again in 1.62s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 79.0%] ✓ Parsed: 1222 | Unknown            | Diff: 3/5
Skipping problem 1225: contains numbered angles (∠1, ∠2)
[ 80.0%] ⊘ Skipped: 1225
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29845, Requested 1786. Please try again in 3.262s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 81.0%] ✓ Parsed: 1226 | Unknown            | Diff: 3/5
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29045, Requested 1796. Please try again in 1.682s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 82.0%] ✓ Parsed: 1227 | Unknown            | Diff: 3/5
Skipping problem 1228: contains numbered angles (∠1, ∠2)
[ 83.0%] ⊘ Skipped: 1228
Skipping problem 1229: contains numbered angles (∠1, ∠2)
[ 84.0%] ⊘ Skipped: 1229
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29983, Requested 1791. Please try again in 3.548s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 85.0%] ✓ Parsed: 1230 | Unknown            | Diff: 3/5
Problem 1234 rejected: 点O的位置未定义，∠OCB中的O不是三角形ABC的顶点，O在圆心到C、B的连线上的具体位置不明，无法唯一确定构图。
[ 86.0%] ⊘ Skipped: 1234
Problem 1235 rejected: 点E、F、C的位置未定义，无法确定其在何处，且涉及质量计算，缺乏完整的几何构造条件
[ 87.0%] ⊘ Skipped: 1235
Validation failed for 1236: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29604, Requested 603. Please try again in 414ms. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}
[ 88.0%] ✓ Parsed: 1236 | Circle Properties  | Diff: 3/5
Validation failed for 1239: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29695, Requested 605. Please try again in 600ms. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 28995, Requested 1799. Please try again in 1.588s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 89.0%] ✓ Parsed: 1239 | Unknown            | Diff: 3/5
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29046, Requested 1801. Please try again in 1.694s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 90.0%] ✓ Parsed: 1240 | Unknown            | Diff: 3/5
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 28199, Requested 1809. Please try again in 16ms. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 91.0%] ✓ Parsed: 1241 | Unknown            | Diff: 3/5
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 28538, Requested 1798. Please try again in 672ms. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 92.0%] ✓ Parsed: 1242 | Unknown            | Diff: 3/5
Problem 1243 rejected: 点D和E的位置不完全定义。DE是AC的垂直平分线，但D和E分别在何处未明，无法唯一确定。
[ 93.0%] ⊘ Skipped: 1243
Validation failed for 1244: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 30000, Requested 597. Please try again in 1.194s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 28402, Requested 1790. Please try again in 384ms. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 94.0%] ✓ Parsed: 1244 | Unknown            | Diff: 3/5
Skipping problem 1247: contains numbered angles (∠1, ∠2)
[ 95.0%] ⊘ Skipped: 1247
Problem 1248 rejected: 点E和F的位置未定义，无法确定其在何处，属于未定义点。
[ 96.0%] ⊘ Skipped: 1248
Validation failed for 1249: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 30000, Requested 599. Please try again in 1.198s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}
[ 97.0%] ✓ Parsed: 1249 | Circle Properties  | Diff: 4/5
Validation failed for 1254: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 30000, Requested 611. Please try again in 1.222s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 30000, Requested 1800. Please try again in 3.6s. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 98.0%] ✓ Parsed: 1254 | Unknown            | Diff: 3/5
Validation failed for 1261: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 29625, Requested 597. Please try again in 444ms. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}
LLM parsing failed: Error code: 429 - {'error': {'message': 'Rate limit reached for gpt-4.1 in organization org-lxMnhZSYE2KsWOPVAy20ySVC on tokens per min (TPM): Limit 30000, Used 28503, Requested 1791. Please try again in 588ms. Visit https://platform.openai.com/account/rate-limits to learn more.', 'type': 'tokens', 'param': None, 'code': 'rate_limit_exceeded'}}, falling back to rule-based
[ 99.0%] ✓ Parsed: 1261 | Unknown            | Diff: 3/5
Problem 1264 rejected: Undefined Points: The positions of points B, D, C, E are not defined. There is no information about where these points are located or their relationships, so the figure cannot be constructed.
[100.0%] ⊘ Skipped: 1264

============================================================
Range 700-800 Complete!
============================================================
  Already done: 62
  Parsed: 22
  Skipped (validation failed): 16
  Errors: 0
  Total processed this run: 38

✓ Processing complete!
  Output saved to: ground_truth/dataset_700_800.jsonl

  To merge all files into final dataset:
  python create_dataset.py --merge
[2025-12-10 14:47:06] 배치 8 완료: 700 ~ 800
